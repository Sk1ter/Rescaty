<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mis Solicitudes – Rescaty</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<link rel="stylesheet" th:href="@{/css/detalle-mascota.css}">
<link rel="stylesheet" th:href="@{/css/mis-solicitudes.css}">

</head>

<body>

	<!-- HEADER -->
	<header class="header-main shadow-sm">
		<nav class="container d-flex align-items-center justify-content-between py-2">

			<a th:href="@{/home}" class="navbar-brand d-flex align-items-center gap-2 m-0">
				<img src="/img/RescatyLogo.png" alt="Logo" height="55" class="logo-home">
			</a>

			<div class="d-flex align-items-center gap-3">

				<button class="btn btn-icon position-relative notif-btn" data-bs-toggle="offcanvas"
					data-bs-target="#notifCanvas">
					<i class="fa-solid fa-bell"></i>
					<span class="notif-indicator"></span>
				</button>

				<div class="dropdown">
					<button class="btn user-btn d-flex align-items-center gap-2" data-bs-toggle="dropdown">
						<img src="/img/AvatarUser.png" class="user-avatar rounded-circle" alt="Usuario">
						<span class="fw-semibold user-name text-dark"
							th:text="${usuario != null ? usuario.nombreCompleto : 'Invitado'}"></span>
						<i class="fa-solid fa-chevron-down small text-secondary"></i>
					</button>

					<ul class="dropdown-menu dropdown-menu-end shadow-sm border-0 user-dropdown">
						<li><a class="dropdown-item" th:href="@{/profile}">
								<i class="fa-solid fa-user"></i> Perfil
							</a></li>

						<li><a class="dropdown-item" th:href="@{/configuration}">
								<i class="fa-solid fa-gear"></i> Configuración
							</a></li>

						<li><a class="dropdown-item" th:href="@{/support}">
								<i class="fa-solid fa-circle-info"></i> Soporte
							</a></li>

						<li><a class="dropdown-item" th:href="@{/dashboard}">
								<i class="fa-solid fa-gauge"></i> Dashboard
							</a></li>

						<li>
							<hr class="dropdown-divider">
						</li>

						<li>
							<form th:action="@{/logout}" method="post">
								<button type="submit" class="dropdown-item logout-item">
									<i class="fa-solid fa-right-from-bracket"></i> Cerrar sesión
								</button>
							</form>
						</li>
					</ul>
				</div>

			</div>
		</nav>
	</header>

	<!-- NAV SECCIONES -->
    <section class="py-4 cause-section">
        <div class="container">
            <div class="d-flex flex-wrap gap-3 justify-content-center cause-wrapper">
                <a th:href="@{/home}" class="cause-pill btn btn-primary shadow-sm">
                    <i class="fa-solid fa-house"></i> <span>Actividades</span>
                </a>
                <a th:href="@{/usermascotas}" class="cause-pill shadow-sm">
                    <i class="fa-solid fa-dog"></i> <span>Mascotas</span>
                </a>
                <a th:href="@{/mis-solicitudes}" class="cause-pill shadow-sm active">
                    <i class="fa-solid fa-file-lines"></i> <span>Solicitudes</span>
                </a>
            </div>
        </div>
    </section>

	<!-- CONTENIDO PRINCIPAL -->
    <section class="py-4">
        <div class="container">

            <h2 class="fw-bold mb-4 text-center">Mis Solicitudes de Adopción</h2>

            <!-- Mensaje si no hay solicitudes -->
            <div th:if="${solicitudes.size() == 0}" class="text-center py-5">
                <i class="fa-solid fa-folder-open fa-3x text-secondary mb-3"></i>
                <h5 class="text-muted">Aún no has enviado solicitudes de adopción.</h5>
            </div>

            <!-- Lista de solicitudes -->
            <div class="d-flex flex-column gap-3" th:if="${solicitudes.size() > 0}">

                <div class="solicitud-card" th:each="sol : ${solicitudes}">

                    <img th:src="@{/img/Adopta1.png}" class="pet-img" alt="Mascota">

                    <div class="flex-grow-1">
                        <h5 class="solicitud-title">
                            Solicitud para: <span th:text="${sol.nombreCompleto}"></span>
                        </h5>

                        <p class="solicitud-data mb-1">
                            <strong>Mascota ID:</strong> <span th:text="${sol.mascotaId}"></span>
                        </p>

                        <p class="solicitud-data mb-1">
                            <strong>Fecha:</strong>
                            <span>Fecha no disponible</span>
                        </p>

                        <span class="badge-estado"
                            th:classappend="
                                ${sol.estado == 'PENDIENTE'} ? ' estado-pendiente' :
                                ${sol.estado == 'APROBADA'} ? ' estado-aprobada' :
                                ' estado-rechazada'
                            "
                            th:text="${sol.estado}">
                        </span>
                    </div>

                    <div class="d-flex flex-column gap-2 text-end">
                        <a th:href="@{'/solicitud/' + ${sol.id}}" class="btn btn-ver btn-sm">
                            <i class="fa-solid fa-eye"></i> Ver
                        </a>

                        <a th:href="@{'/solicitud/' + ${sol.id} + '/eliminar'}"
                           class="btn btn-outline-danger btn-sm"
                           onclick="return confirm('¿Eliminar esta solicitud?');">
                            <i class="fa-solid fa-trash"></i>
                        </a>
                    </div>

                </div>

            </div>

        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
