package pe.edu.certus.rescatyfrontend.cliente;

import java.util.Arrays;
import java.util.List;

import org.springframework.stereotype.Component;
import org.springframework.web.client.RestTemplate;

import pe.edu.certus.rescatyfrontend.dto.SolicitudAdopcionRequest;
import pe.edu.certus.rescatyfrontend.modelo.SolicitudAdopcion;

@Component
public class SolicitudAdopcionApiCliente {

    private final String URL = "http://localhost:8080/api/solicitudes";
    private final RestTemplate rest = new RestTemplate();

    public SolicitudAdopcion registrar(SolicitudAdopcionRequest req) {
        return rest.postForObject(URL + "/registrar", req, SolicitudAdopcion.class);
    }

    public List<SolicitudAdopcion> listar() {
        return Arrays.asList(rest.getForObject(URL, SolicitudAdopcion[].class));
    }

    public List<SolicitudAdopcion> listarPorUsuario(Long usuarioId) {
        return Arrays.asList(rest.getForObject(URL + "/usuario/" + usuarioId, SolicitudAdopcion[].class));
    }
}
